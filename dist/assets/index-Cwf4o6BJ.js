var At=Object.defineProperty;var wt=(s,t,e)=>t in s?At(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var w=(s,t,e)=>wt(s,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function e(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(n){if(n.ep)return;n.ep=!0;const r=e(n);fetch(n.href,r)}})();function Y(s){"@babel/helpers - typeof";return Y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y(s)}var Tt=/^\s+/,Ct=/\s+$/;function u(s,t){if(s=s||"",t=t||{},s instanceof u)return s;if(!(this instanceof u))return new u(s,t);var e=Et(s);this._originalInput=s,this._r=e.r,this._g=e.g,this._b=e.b,this._a=e.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||e.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=e.ok}u.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},getLuminance:function(){var t=this.toRgb(),e,a,n,r,o,l;return e=t.r/255,a=t.g/255,n=t.b/255,e<=.03928?r=e/12.92:r=Math.pow((e+.055)/1.055,2.4),a<=.03928?o=a/12.92:o=Math.pow((a+.055)/1.055,2.4),n<=.03928?l=n/12.92:l=Math.pow((n+.055)/1.055,2.4),.2126*r+.7152*o+.0722*l},setAlpha:function(t){return this._a=yt(t),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var t=at(this._r,this._g,this._b);return{h:t.h*360,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=at(this._r,this._g,this._b),e=Math.round(t.h*360),a=Math.round(t.s*100),n=Math.round(t.v*100);return this._a==1?"hsv("+e+", "+a+"%, "+n+"%)":"hsva("+e+", "+a+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var t=et(this._r,this._g,this._b);return{h:t.h*360,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=et(this._r,this._g,this._b),e=Math.round(t.h*360),a=Math.round(t.s*100),n=Math.round(t.l*100);return this._a==1?"hsl("+e+", "+a+"%, "+n+"%)":"hsla("+e+", "+a+"%, "+n+"%, "+this._roundA+")"},toHex:function(t){return nt(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return It(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(y(this._r,255)*100)+"%",g:Math.round(y(this._g,255)*100)+"%",b:Math.round(y(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(y(this._r,255)*100)+"%, "+Math.round(y(this._g,255)*100)+"%, "+Math.round(y(this._b,255)*100)+"%)":"rgba("+Math.round(y(this._r,255)*100)+"%, "+Math.round(y(this._g,255)*100)+"%, "+Math.round(y(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Gt[nt(this._r,this._g,this._b,!0)]||!1},toFilter:function(t){var e="#"+st(this._r,this._g,this._b,this._a),a=e,n=this._gradientType?"GradientType = 1, ":"";if(t){var r=u(t);a="#"+st(r._r,r._g,r._b,r._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+e+",endColorstr="+a+")"},toString:function(t){var e=!!t;t=t||this._format;var a=!1,n=this._a<1&&this._a>=0,r=!e&&n&&(t==="hex"||t==="hex6"||t==="hex3"||t==="hex4"||t==="hex8"||t==="name");return r?t==="name"&&this._a===0?this.toName():this.toRgbString():(t==="rgb"&&(a=this.toRgbString()),t==="prgb"&&(a=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(a=this.toHexString()),t==="hex3"&&(a=this.toHexString(!0)),t==="hex4"&&(a=this.toHex8String(!0)),t==="hex8"&&(a=this.toHex8String()),t==="name"&&(a=this.toName()),t==="hsl"&&(a=this.toHslString()),t==="hsv"&&(a=this.toHsvString()),a||this.toHexString())},clone:function(){return u(this.toString())},_applyModification:function(t,e){var a=t.apply(null,[this].concat([].slice.call(e)));return this._r=a._r,this._g=a._g,this._b=a._b,this.setAlpha(a._a),this},lighten:function(){return this._applyModification(Dt,arguments)},brighten:function(){return this._applyModification(Nt,arguments)},darken:function(){return this._applyModification(Bt,arguments)},desaturate:function(){return this._applyModification(Rt,arguments)},saturate:function(){return this._applyModification(Ht,arguments)},greyscale:function(){return this._applyModification(Lt,arguments)},spin:function(){return this._applyModification(Wt,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(Xt,arguments)},complement:function(){return this._applyCombination(qt,arguments)},monochromatic:function(){return this._applyCombination($t,arguments)},splitcomplement:function(){return this._applyCombination(Ot,arguments)},triad:function(){return this._applyCombination(rt,[3])},tetrad:function(){return this._applyCombination(rt,[4])}};u.fromRatio=function(s,t){if(Y(s)=="object"){var e={};for(var a in s)s.hasOwnProperty(a)&&(a==="a"?e[a]=s[a]:e[a]=q(s[a]));s=e}return u(s,t)};function Et(s){var t={r:0,g:0,b:0},e=1,a=null,n=null,r=null,o=!1,l=!1;return typeof s=="string"&&(s=Ut(s)),Y(s)=="object"&&(F(s.r)&&F(s.g)&&F(s.b)?(t=Pt(s.r,s.g,s.b),o=!0,l=String(s.r).substr(-1)==="%"?"prgb":"rgb"):F(s.h)&&F(s.s)&&F(s.v)?(a=q(s.s),n=q(s.v),t=Ft(s.h,a,n),o=!0,l="hsv"):F(s.h)&&F(s.s)&&F(s.l)&&(a=q(s.s),r=q(s.l),t=kt(s.h,a,r),o=!0,l="hsl"),s.hasOwnProperty("a")&&(e=s.a)),e=yt(e),{ok:o,format:s.format||l,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:e}}function Pt(s,t,e){return{r:y(s,255)*255,g:y(t,255)*255,b:y(e,255)*255}}function et(s,t,e){s=y(s,255),t=y(t,255),e=y(e,255);var a=Math.max(s,t,e),n=Math.min(s,t,e),r,o,l=(a+n)/2;if(a==n)r=o=0;else{var i=a-n;switch(o=l>.5?i/(2-a-n):i/(a+n),a){case s:r=(t-e)/i+(t<e?6:0);break;case t:r=(e-s)/i+2;break;case e:r=(s-t)/i+4;break}r/=6}return{h:r,s:o,l}}function kt(s,t,e){var a,n,r;s=y(s,360),t=y(t,100),e=y(e,100);function o(h,d,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?h+(d-h)*6*c:c<1/2?d:c<2/3?h+(d-h)*(2/3-c)*6:h}if(t===0)a=n=r=e;else{var l=e<.5?e*(1+t):e+t-e*t,i=2*e-l;a=o(i,l,s+1/3),n=o(i,l,s),r=o(i,l,s-1/3)}return{r:a*255,g:n*255,b:r*255}}function at(s,t,e){s=y(s,255),t=y(t,255),e=y(e,255);var a=Math.max(s,t,e),n=Math.min(s,t,e),r,o,l=a,i=a-n;if(o=a===0?0:i/a,a==n)r=0;else{switch(a){case s:r=(t-e)/i+(t<e?6:0);break;case t:r=(e-s)/i+2;break;case e:r=(s-t)/i+4;break}r/=6}return{h:r,s:o,v:l}}function Ft(s,t,e){s=y(s,360)*6,t=y(t,100),e=y(e,100);var a=Math.floor(s),n=s-a,r=e*(1-t),o=e*(1-n*t),l=e*(1-(1-n)*t),i=a%6,h=[e,o,r,r,l,e][i],d=[l,e,e,o,r,r][i],c=[r,r,l,e,e,o][i];return{r:h*255,g:d*255,b:c*255}}function nt(s,t,e,a){var n=[P(Math.round(s).toString(16)),P(Math.round(t).toString(16)),P(Math.round(e).toString(16))];return a&&n[0].charAt(0)==n[0].charAt(1)&&n[1].charAt(0)==n[1].charAt(1)&&n[2].charAt(0)==n[2].charAt(1)?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0):n.join("")}function It(s,t,e,a,n){var r=[P(Math.round(s).toString(16)),P(Math.round(t).toString(16)),P(Math.round(e).toString(16)),P(Mt(a))];return n&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)&&r[3].charAt(0)==r[3].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0)+r[3].charAt(0):r.join("")}function st(s,t,e,a){var n=[P(Mt(a)),P(Math.round(s).toString(16)),P(Math.round(t).toString(16)),P(Math.round(e).toString(16))];return n.join("")}u.equals=function(s,t){return!s||!t?!1:u(s).toRgbString()==u(t).toRgbString()};u.random=function(){return u.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function Rt(s,t){t=t===0?0:t||10;var e=u(s).toHsl();return e.s-=t/100,e.s=z(e.s),u(e)}function Ht(s,t){t=t===0?0:t||10;var e=u(s).toHsl();return e.s+=t/100,e.s=z(e.s),u(e)}function Lt(s){return u(s).desaturate(100)}function Dt(s,t){t=t===0?0:t||10;var e=u(s).toHsl();return e.l+=t/100,e.l=z(e.l),u(e)}function Nt(s,t){t=t===0?0:t||10;var e=u(s).toRgb();return e.r=Math.max(0,Math.min(255,e.r-Math.round(255*-(t/100)))),e.g=Math.max(0,Math.min(255,e.g-Math.round(255*-(t/100)))),e.b=Math.max(0,Math.min(255,e.b-Math.round(255*-(t/100)))),u(e)}function Bt(s,t){t=t===0?0:t||10;var e=u(s).toHsl();return e.l-=t/100,e.l=z(e.l),u(e)}function Wt(s,t){var e=u(s).toHsl(),a=(e.h+t)%360;return e.h=a<0?360+a:a,u(e)}function qt(s){var t=u(s).toHsl();return t.h=(t.h+180)%360,u(t)}function rt(s,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var e=u(s).toHsl(),a=[u(s)],n=360/t,r=1;r<t;r++)a.push(u({h:(e.h+r*n)%360,s:e.s,l:e.l}));return a}function Ot(s){var t=u(s).toHsl(),e=t.h;return[u(s),u({h:(e+72)%360,s:t.s,l:t.l}),u({h:(e+216)%360,s:t.s,l:t.l})]}function Xt(s,t,e){t=t||6,e=e||30;var a=u(s).toHsl(),n=360/e,r=[u(s)];for(a.h=(a.h-(n*t>>1)+720)%360;--t;)a.h=(a.h+n)%360,r.push(u(a));return r}function $t(s,t){t=t||6;for(var e=u(s).toHsv(),a=e.h,n=e.s,r=e.v,o=[],l=1/t;t--;)o.push(u({h:a,s:n,v:r})),r=(r+l)%1;return o}u.mix=function(s,t,e){e=e===0?0:e||50;var a=u(s).toRgb(),n=u(t).toRgb(),r=e/100,o={r:(n.r-a.r)*r+a.r,g:(n.g-a.g)*r+a.g,b:(n.b-a.b)*r+a.b,a:(n.a-a.a)*r+a.a};return u(o)};u.readability=function(s,t){var e=u(s),a=u(t);return(Math.max(e.getLuminance(),a.getLuminance())+.05)/(Math.min(e.getLuminance(),a.getLuminance())+.05)};u.isReadable=function(s,t,e){var a=u.readability(s,t),n,r;switch(r=!1,n=jt(e),n.level+n.size){case"AAsmall":case"AAAlarge":r=a>=4.5;break;case"AAlarge":r=a>=3;break;case"AAAsmall":r=a>=7;break}return r};u.mostReadable=function(s,t,e){var a=null,n=0,r,o,l,i;e=e||{},o=e.includeFallbackColors,l=e.level,i=e.size;for(var h=0;h<t.length;h++)r=u.readability(s,t[h]),r>n&&(n=r,a=u(t[h]));return u.isReadable(s,a,{level:l,size:i})||!o?a:(e.includeFallbackColors=!1,u.mostReadable(s,["#fff","#000"],e))};var j=u.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Gt=u.hexNames=Yt(j);function Yt(s){var t={};for(var e in s)s.hasOwnProperty(e)&&(t[s[e]]=e);return t}function yt(s){return s=parseFloat(s),(isNaN(s)||s<0||s>1)&&(s=1),s}function y(s,t){zt(s)&&(s="100%");var e=Vt(s);return s=Math.min(t,Math.max(0,parseFloat(s))),e&&(s=parseInt(s*t,10)/100),Math.abs(s-t)<1e-6?1:s%t/parseFloat(t)}function z(s){return Math.min(1,Math.max(0,s))}function C(s){return parseInt(s,16)}function zt(s){return typeof s=="string"&&s.indexOf(".")!=-1&&parseFloat(s)===1}function Vt(s){return typeof s=="string"&&s.indexOf("%")!=-1}function P(s){return s.length==1?"0"+s:""+s}function q(s){return s<=1&&(s=s*100+"%"),s}function Mt(s){return Math.round(parseFloat(s)*255).toString(16)}function it(s){return C(s)/255}var E=function(){var s="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",e="(?:"+t+")|(?:"+s+")",a="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?",n="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?";return{CSS_UNIT:new RegExp(e),rgb:new RegExp("rgb"+a),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+a),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+a),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function F(s){return!!E.CSS_UNIT.exec(s)}function Ut(s){s=s.replace(Tt,"").replace(Ct,"").toLowerCase();var t=!1;if(j[s])s=j[s],t=!0;else if(s=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var e;return(e=E.rgb.exec(s))?{r:e[1],g:e[2],b:e[3]}:(e=E.rgba.exec(s))?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=E.hsl.exec(s))?{h:e[1],s:e[2],l:e[3]}:(e=E.hsla.exec(s))?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=E.hsv.exec(s))?{h:e[1],s:e[2],v:e[3]}:(e=E.hsva.exec(s))?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=E.hex8.exec(s))?{r:C(e[1]),g:C(e[2]),b:C(e[3]),a:it(e[4]),format:t?"name":"hex8"}:(e=E.hex6.exec(s))?{r:C(e[1]),g:C(e[2]),b:C(e[3]),format:t?"name":"hex"}:(e=E.hex4.exec(s))?{r:C(e[1]+""+e[1]),g:C(e[2]+""+e[2]),b:C(e[3]+""+e[3]),a:it(e[4]+""+e[4]),format:t?"name":"hex8"}:(e=E.hex3.exec(s))?{r:C(e[1]+""+e[1]),g:C(e[2]+""+e[2]),b:C(e[3]+""+e[3]),format:t?"name":"hex"}:!1}function jt(s){var t,e;return s=s||{level:"AA",size:"small"},t=(s.level||"AA").toUpperCase(),e=(s.size||"small").toLowerCase(),t!=="AA"&&t!=="AAA"&&(t="AA"),e!=="small"&&e!=="large"&&(e="small"),{level:t,size:e}}const ot=2,Kt=13500,lt=26,ht=300,Jt=2e3,Zt=3500,T=350,ct=.79,V=140,dt=.9,ut=.28,ft=.45,gt=1.4,Qt=.18,mt=220,te=45,pt=[{name:"Ruby",base:"#FF3864",edge:"#64091F",highlight:"#FFD8E0",rune:"#FF6A88",crest:"#F9B042"},{name:"Sapphire",base:"#3B82F6",edge:"#08204E",highlight:"#D4E7FF",rune:"#5DA4FF",crest:"#F4E4C1"},{name:"Emerald",base:"#00C896",edge:"#024F3C",highlight:"#C3FFEE",rune:"#3DE0B5",crest:"#F1F7A1"},{name:"Amethyst",base:"#9B5DE5",edge:"#2D0D58",highlight:"#E9D4FF",rune:"#B07CFF",crest:"#FFD1EB"},{name:"Topaz",base:"#FFB400",edge:"#633C00",highlight:"#FFEAB5",rune:"#FFC94A",crest:"#FFEEDD"},{name:"Opal",base:"#3DE0FF",edge:"#0A4A5A",highlight:"#E0FAFF",rune:"#6BEFFF",crest:"#F1F8FF"},{name:"Garnet",base:"#C81D25",edge:"#47060B",highlight:"#FFD5D1",rune:"#E23C45",crest:"#F6C08E"}],bt=["·ö†","·ö¢","·ö¶","·ö®","·ö±","·ö≤","·ö∫"],R={random:"All contenders spawn in random positions inside the arena.",even:"Fighters spawn evenly spaced around the circle.",clusters:"Contenders arrive in small clusters of 2-3 per side.",center:"All fighters drop near the middle as the circle shrinks quickly.",storm:"Everyone spawns outside the safe zone and must rush into the arena."},vt=s=>s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),St=document.querySelector("#app");if(!St)throw new Error("App root element not found");St.innerHTML=`
  <div class="panel">
    <header class="header">
      <h1>Battle of Names</h1>
    </header>
    <div class="layout">
      <aside class="sidebar">
        <section class="input-panel">
          <label class="input-label" for="namesInput">Enter contenders</label>
          <textarea id="namesInput" placeholder="One name per line..."></textarea>
          <div class="controls">
            <button id="startBtn">Start Battle</button>
            <label class="select-label">
              Spawn Points
              <select id="spawnMode">
                <option value="random" data-description="${R.random}">Random</option>
                <option value="even" data-description="${R.even}">Even Spread</option>
                <option value="clusters" data-description="${R.clusters}">Clustered Teams</option>
                <option value="center" data-description="${R.center}">Center Drop</option>
                <option value="storm" data-description="${R.storm}">Storm Spawn</option>
              </select>
            </label>
          </div>
          <div class="status-bar" id="statusBar"></div>
        </section>
        <section class="scoreboard-panel">
          <h2 class="scoreboard-title">Arena Roster</h2>
          <ul id="scoreboardActive" class="scoreboard scoreboard--active"></ul>
          <div id="scoreboardFallenSection" class="scoreboard-fallen" hidden>
            <h3 class="scoreboard-fallen__title">Fallen</h3>
            <ul id="scoreboardFallen" class="scoreboard scoreboard--fallen"></ul>
          </div>
        </section>
      </aside>
      <main class="main-column">
        <div class="canvas-wrapper">
          <canvas id="battleCanvas"></canvas>
          <div id="overlayText" class="overlay-text"></div>
        </div>
        <section class="results-panel results-panel--empty" id="resultsPanel">
          <h2>Battle Log</h2>
          <div class="winner-banner" id="winnerBanner"></div>
          <div class="results-placeholder" id="resultsPlaceholder">
            Results will appear here once a battle concludes.
          </div>
          <ol id="resultsList"></ol>
        </section>
      </main>
    </div>
    <footer class="flavor-bar">üí¨ Tip: "Legends say only one name survives the circle..."</footer>
  </div>
`;const ee=document.querySelector("#namesInput"),U=document.querySelector("#startBtn"),O=document.querySelector("#spawnMode"),xt=document.querySelector("#statusBar"),L=document.querySelector("#battleCanvas"),ae=document.querySelector("#overlayText"),ne=document.querySelector("#resultsPanel"),se=document.querySelector("#winnerBanner"),re=document.querySelector("#resultsList"),ie=document.querySelector("#resultsPlaceholder"),oe=document.querySelector("#scoreboardActive"),le=document.querySelector("#scoreboardFallen"),he=document.querySelector("#scoreboardFallenSection"),D=L.getContext("2d");if(!D)throw new Error("Canvas context not available");const _t=()=>{const s=O.value,t=R[s];t&&(O.title=t)};Array.from(O.options).forEach(s=>{const t=s.value;R[t]&&(s.title=R[t])});_t();O.addEventListener("change",_t);class ce{constructor(t,e,a,n,r,o,l,i){w(this,"phase","idle");w(this,"fighters",[]);w(this,"results",[]);w(this,"requestId",null);w(this,"countdownEndsAt",0);w(this,"roundStartAt",0);w(this,"lastFrameTime",0);w(this,"arena",{radius:200,minRadius:80});w(this,"centerX",0);w(this,"centerY",0);w(this,"canvasWidth",0);w(this,"canvasHeight",0);w(this,"lightningSeeds",Array.from({length:12},()=>Math.random()*Math.PI*2));w(this,"hitEffects",[]);w(this,"scoreboardEntries",new Map);w(this,"loop",t=>{const e=Math.min((t-this.lastFrameTime)/1e3,.05);if(this.lastFrameTime=t,this.phase==="countdown"){const a=Math.max(0,this.countdownEndsAt-t),n=Math.ceil(a/1e3);this.overlayElement.textContent=n>0?n.toString():"FIGHT!",this.overlayElement.style.opacity=a<400?(a/400).toFixed(2):"1",this.setStatus(`Prepare to battle in ${Math.ceil(a/1e3)}...`),a<=0&&(this.overlayElement.textContent="",this.phase="running",this.roundStartAt=t,this.lastFrameTime=t)}else if(this.phase==="running"){const a=t-this.roundStartAt;this.updateArena(t,a,e),this.updateFighters(t,e),this.detectCollisions(t);const n=this.fighters.filter(r=>r.alive);if(n.length<=1||a>=Kt){const r=n[0]??this.breakTie();this.finishBattle(t,r??null,a)}else{const r=Math.max(0,this.arena.radius-this.arena.minRadius),o=Math.ceil(r/lt);this.setStatus(`Arena shrinking ¬∑ ${n.length} fighters left ¬∑ ${o}s to final circle`)}}this.render(),this.requestId=requestAnimationFrame(this.loop)});this.context=t,this.statusElement=e,this.overlayElement=a,this.resultsElement=n,this.winnerElement=r,this.resultsListElement=o,this.resultsPlaceholderElement=l,this.scoreboard=i,this.resizeCanvas(),window.addEventListener("resize",()=>this.resizeCanvas()),this.setStatus("Add some names and hit Start Battle!")}start(t,e){this.cancelLoop(),this.fighters=[],this.results=[],this.hitEffects=[],this.phase="countdown";const a=performance.now();this.countdownEndsAt=a+ot*1e3,this.roundStartAt=0,this.lastFrameTime=a,this.overlayElement.textContent=ot.toString(),this.winnerElement.textContent="",this.resultsListElement.innerHTML="",this.resultsPlaceholderElement.hidden=!1,this.resultsElement.classList.add("results-panel--empty"),this.setStatus("Battle starting..."),this.lightningSeeds=this.lightningSeeds.map(()=>Math.random()*Math.PI*2);const n=Math.min(this.canvasWidth,this.canvasHeight),r=n/2.6;this.arena={radius:r,minRadius:n/8},this.scoreboard.fallenSection.hidden=!0,this.prepareFighters(t,e),this.buildScoreboard(),this.loop(a)}prepareFighters(t,e){e==="center"&&(this.arena.radius=Math.max(this.arena.minRadius*1.4,this.arena.radius*.82));const n=Math.min(this.canvasWidth,this.canvasHeight)/18,r=Math.max(18,Math.min(32,n)),o=this.arena.radius*.72,l=this.computeSpawnPositions(e,t.length,r,o),i=performance.now();t.forEach((h,d)=>{const c=pt[d%pt.length],m=this.createFighterSprite(c),p=bt[d%bt.length],f=l[d]??{x:this.centerX,y:this.centerY},g=Number.isFinite(f.x)?f.x:this.centerX,b=Number.isFinite(f.y)?f.y:this.centerY;let v=(Math.random()-.5)*T*.2,S=(Math.random()-.5)*T*.2,x=Math.random()*Math.PI*2,M=.6+Math.random()*1.6,A=null;if(e==="storm"){const I=this.centerX-g,H=this.centerY-b,X=Math.hypot(I,H)||1,$=T*.75;v=I/X*$,S=H/X*$,x=Math.atan2(H,I),M=.35+Math.random()*.25,A=i+Zt}else e==="center"?M=.3+Math.random()*.5:e==="even"?x=Math.atan2(this.centerY-b,this.centerX-g):e==="clusters"&&(M=.5+Math.random()*1);this.fighters.push({id:d,name:h,color:c.base,theme:c,x:g,y:b,vx:v,vy:S,radius:r,health:3,hitsTaken:0,hitsInflicted:0,lastDamageAt:0,outsideSince:A,alive:!0,orientation:x,weaponSwingPhase:Math.random()*Math.PI*2,weaponSwingSpeed:4+Math.random()*4,wanderAngle:Math.random()*Math.PI*2,wanderTimer:M,runeRotation:Math.random()*Math.PI*2,pulsePhase:Math.random()*Math.PI*2,trailSegments:[],trailCooldown:0,sprite:m,displayIndex:d+1,runeChar:p,hitOverlayUntil:0,hitSquash:0})})}computeSpawnPositions(t,e,a,n){const r=[];if(e===0)return r;const o=Math.max(a*3,Math.min(n,this.arena.radius-a*1.4));if(t==="random"){const l=[];for(let h=0;h<e;h+=1){let d=this.centerX,c=this.centerY,m=!1;for(let p=0;p<48;p+=1){const f=Math.random()*Math.PI*2,g=Math.random()*n,b=this.centerX+Math.cos(f)*g,v=this.centerY+Math.sin(f)*g,S=a*2.4;if(l.every(M=>Math.hypot(b-M.x,v-M.y)>S)){d=b,c=v,l.push({x:d,y:c}),m=!0;break}}if(!m){const p=2*Math.PI*h/e,f=o;d=this.centerX+Math.cos(p)*f,c=this.centerY+Math.sin(p)*f,l.push({x:d,y:c})}r.push({x:d,y:c})}return r}if(t==="even"){const l=o;for(let i=0;i<e;i+=1){const d=2*Math.PI*i/e+(Math.random()-.5)*(Math.PI/Math.max(4,e)),c=Math.random()*a*.8,m=l-Math.random()*a*.6,p=this.centerX+Math.cos(d)*Math.max(m,a*2.2)+Math.cos(d+Math.PI/2)*c,f=this.centerY+Math.sin(d)*Math.max(m,a*2.2)+Math.sin(d+Math.PI/2)*c;r.push({x:p,y:f})}}else if(t==="clusters"){const l=Math.max(1,Math.ceil(e/3)),i=Math.max(a*4,o*.85),h=a*2.6,d=new Array(l).fill(2);let c=l*2,m=l-1;for(;c>e&&m>=0;)d[m]>1&&(d[m]-=1,c-=1),m-=1;let p=0;for(;c<e;){const f=p%l;if(d[f]<3&&(d[f]+=1,c+=1),p+=1,p>l*3&&c<e)break}for(let f=0;f<l;f+=1){const g=2*Math.PI*f/l,b=this.centerX+Math.cos(g)*i,v=this.centerY+Math.sin(g)*i;for(let S=0;S<d[f]&&!(r.length>=e);S+=1){const x=Math.random()*Math.PI*2,M=Math.random()*h;r.push({x:b+Math.cos(x)*M,y:v+Math.sin(x)*M})}}}else if(t==="center"){const l=Math.max(a*3,this.arena.radius*.26);for(let i=0;i<e;i+=1){const h=Math.random()*Math.PI*2,d=Math.random()*l*.75,c=i/Math.max(1,e)*a*.4;r.push({x:this.centerX+Math.cos(h)*d+Math.cos(h+Math.PI/2)*c,y:this.centerY+Math.sin(h)*d+Math.sin(h+Math.PI/2)*c})}}else if(t==="storm"){const l=this.arena.radius*1.08,i=a*1.8;for(let h=0;h<e;h+=1){const c=2*Math.PI*h/e+(Math.random()-.5)*(Math.PI/Math.max(4,e)),m=l+Math.random()*i;r.push({x:this.centerX+Math.cos(c)*m,y:this.centerY+Math.sin(c)*m})}}for(;r.length<e;)r.push({x:this.centerX,y:this.centerY});return r.length>e&&(r.length=e),r}createFighterSprite(t){const a=document.createElement("canvas");a.width=200,a.height=200;const n=a.getContext("2d");if(!n)throw new Error("Failed to create fighter sprite context");n.save(),n.translate(200/2,200/2);const r=200*.36,o=u(t.base).lighten(22).toHexString(),l=u(t.base).lighten(5).toHexString(),i=u(t.base).darken(18).toHexString(),h=n.createRadialGradient(0,-r*.25,r*.1,0,0,r);h.addColorStop(0,o),h.addColorStop(.55,l),h.addColorStop(1,i),n.fillStyle=h,n.beginPath(),n.arc(0,0,r,0,Math.PI*2),n.fill(),n.globalAlpha=.35,n.fillStyle=t.highlight,n.beginPath(),n.ellipse(-r*.28,-r*.3,r*.55,r*.38,Math.PI/4,0,Math.PI*2),n.fill(),n.globalAlpha=1;for(let d=0;d<42;d+=1){const c=Math.random()*Math.PI*2,m=Math.random()*r*.9,p=Math.cos(c)*m,f=Math.sin(c)*m,g=Math.random()*4+2;n.save(),n.translate(p,f),n.rotate(Math.random()*Math.PI);const b=n.createRadialGradient(0,0,0,0,0,g);b.addColorStop(0,"rgba(255,255,255,0.85)"),b.addColorStop(1,"rgba(255,255,255,0)"),n.fillStyle=b,n.fillRect(-g,-g,g*2,g*2),n.restore()}return n.restore(),a}buildScoreboard(){for(const e of this.scoreboardEntries.values())e.pulseTimeout&&window.clearTimeout(e.pulseTimeout);this.scoreboardEntries.clear(),this.scoreboard.alive.innerHTML="",this.scoreboard.fallen.innerHTML="",this.scoreboard.fallenSection.hidden=!0;const t=document.createDocumentFragment();for(const e of this.fighters){const a=document.createElement("li");a.className="scoreboard-entry";const n=document.createElement("span");n.className="scoreboard-entry__gem",n.style.background=`radial-gradient(circle at 35% 35%, ${u(e.theme.highlight).setAlpha(.9).toRgbString()}, ${e.theme.base})`,n.textContent=e.runeChar;const r=document.createElement("span");r.className="scoreboard-entry__name",r.textContent=e.name,r.style.color=u(e.theme.base).lighten(28).toHexString();const o=document.createElement("div");o.className="scoreboard-entry__hearts",a.append(n,r,o),t.appendChild(a),this.scoreboardEntries.set(e.id,{root:a,gem:n,name:r,hearts:o,container:"alive"}),this.updateScoreboardHealth(e)}this.scoreboard.alive.appendChild(t),this.clearWinnerHighlights(),this.updateFallenSectionVisibility()}updateScoreboardHealth(t){const e=this.scoreboardEntries.get(t.id);if(e){e.hearts.innerHTML="";for(let a=0;a<t.health;a+=1){const n=document.createElement("span");n.className="scoreboard-entry__heart",a<t.hitsTaken&&n.classList.add("scoreboard-entry__heart--lost"),e.hearts.appendChild(n)}t.alive?(e.root.classList.remove("scoreboard-entry--eliminated"),e.container!=="alive"&&this.moveScoreboardEntry(e,"alive")):(e.root.classList.add("scoreboard-entry--eliminated"),e.container!=="fallen"&&this.moveScoreboardEntry(e,"fallen")),this.updateFallenSectionVisibility()}}moveScoreboardEntry(t,e){t.container!==e&&(t.root.parentElement&&t.root.parentElement.removeChild(t.root),e==="alive"?this.scoreboard.alive.appendChild(t.root):this.scoreboard.fallen.appendChild(t.root),t.container=e,this.updateFallenSectionVisibility())}updateFallenSectionVisibility(){this.scoreboard.fallenSection.hidden=this.scoreboard.fallen.children.length===0}clearWinnerHighlights(){for(const t of this.scoreboardEntries.values())t.root.classList.remove("scoreboard-entry--winner")}setWinnerHighlight(t){if(this.clearWinnerHighlights(),t===null)return;const e=this.scoreboardEntries.get(t);e&&e.root.classList.add("scoreboard-entry--winner")}pulseScoreboard(t,e){const a=this.scoreboardEntries.get(t);a&&(a.root.classList.remove("scoreboard-entry--pulse-hit","scoreboard-entry--pulse-damage","scoreboard-entry--pulse-eliminated"),a.root.offsetWidth,a.root.classList.add(e),a.pulseTimeout&&window.clearTimeout(a.pulseTimeout),a.pulseTimeout=window.setTimeout(()=>{a.root.classList.remove(e)},e==="scoreboard-entry--pulse-eliminated"?650:420))}updateArena(t,e,a){const n=lt*a;this.arena.radius>this.arena.minRadius&&(this.arena.radius=Math.max(this.arena.minRadius,this.arena.radius-n))}updateFighters(t,e){const a=this.fighters.filter(n=>n.alive);for(const n of a){n.wanderTimer-=e,n.wanderTimer<=0&&(n.wanderAngle=Math.random()*Math.PI*2,n.wanderTimer=.6+Math.random()*1.4);let r=0,o=0,l=0,i=Number.POSITIVE_INFINITY,h=0,d=0;for(const _ of a){if(_===n)continue;const B=_.x-n.x,W=_.y-n.y,k=Math.hypot(B,W);if(k<V&&k>0){const tt=(V-k)/V;r-=B/k*tt,o-=W/k*tt,l+=1}k<i&&(i=k,h=B,d=W)}l>0&&(r/=l,o/=l);const c=this.centerX-n.x,m=this.centerY-n.y,p=Math.hypot(c,m),f=p||1,g=Math.cos(n.wanderAngle),b=Math.sin(n.wanderAngle);let v=0,S=0;if(i<Number.POSITIVE_INFINITY&&i>0){const _=Math.max(1,i);v=h/_*gt,S=d/_*gt}let x=r*dt+c/f*ut+g*ft+v,M=o*dt+m/f*ut+b*ft+S;const A=this.arena.radius*.88;if(p>A){const _=Math.min(2.6,(p-A)/Math.max(1,this.arena.radius-A)*2.6);x+=c/f*_,M+=m/f*_}const I=T*.9,H=Math.hypot(x,M)||1,X=x/H*I,$=M/H*I;n.vx+=(X-n.vx)*e*1.4,n.vy+=($-n.vy)*e*1.4,n.vx*=Math.pow(ct,e*60),n.vy*=Math.pow(ct,e*60);const K=Math.hypot(n.vx,n.vy);if(K>T){const _=T/K;n.vx*=_,n.vy*=_}n.x+=n.vx*e,n.y+=n.vy*e,n.trailCooldown=Math.max(0,n.trailCooldown-e*1e3),n.trailSegments=n.trailSegments.filter(_=>t-_.created<=mt);const G=Math.hypot(n.vx,n.vy);if(n.runeRotation+=e*(.9+Math.min(3,G/(T*.4))),n.pulsePhase+=e,n.hitSquash=Math.max(0,n.hitSquash-e*4.5),G>T*.35&&n.trailCooldown<=0&&(n.trailSegments.push({x:n.x-n.vx*e*.6,y:n.y-n.vy*e*.6,created:t,angle:Math.atan2(n.vy,n.vx),alpha:.28}),n.trailCooldown=te),G>18){const _=Math.atan2(n.vy,n.vx);n.orientation=this.lerpAngle(n.orientation,_,Qt)}n.weaponSwingPhase+=e*n.weaponSwingSpeed*(1+G/T);const J=n.x-this.centerX,Z=n.y-this.centerY,N=Math.hypot(J,Z),Q=this.arena.radius-n.radius;if(N>Q&&N>0){const _=J/N,B=Z/N,W=N-Q,k=Math.min(2.8,W/Math.max(1,n.radius)+.4);n.vx-=_*T*k*e,n.vy-=B*T*k*e,n.outsideSince===null?n.outsideSince=t:t-n.outsideSince>=Jt&&this.eliminate(n,"Lost outside the arena")}else n.outsideSince!==null&&(n.outsideSince=null)}}detectCollisions(t){const e=this.fighters.filter(a=>a.alive);for(let a=0;a<e.length;a+=1)for(let n=a+1;n<e.length;n+=1){const r=e[a],o=e[n],l=o.x-r.x,i=o.y-r.y,h=Math.hypot(l,i),d=r.radius+o.radius;if(h<d&&h>0){const c=d-h,m=l/h,p=i/h;r.x-=m*(c/2),r.y-=p*(c/2),o.x+=m*(c/2),o.y+=p*(c/2);const f=o.vx-r.vx,g=o.vy-r.vy,b=f*m+g*p,v=1.4,S=Math.max(b,90)*.6;if(r.vx-=m*S*v,r.vy-=p*S*v,o.vx+=m*S*v,o.vy+=p*S*v,b>0){const A=b*.45;r.vx+=A*m,r.vy+=A*p,o.vx-=A*m,o.vy-=A*p}const x=t-r.lastDamageAt>ht,M=t-o.lastDamageAt>ht;if(x||M)if(x&&M){const A=Math.random()<.5?r:o,I=A===r?o:r;this.applyHit(A,I,t)}else x?this.applyHit(o,r,t):M&&this.applyHit(r,o,t)}}}applyHit(t,e,a){e.lastDamageAt=a,e.hitsTaken+=1,t.hitsInflicted+=1;const n=Math.min(1.8,Math.hypot(t.vx-e.vx,t.vy-e.vy)/Math.max(1,T*.4));this.triggerHitEffect((e.x+t.x)/2,(e.y+t.y)/2,n),e.hitOverlayUntil=a+150,e.hitSquash=Math.max(e.hitSquash,.25+n*.15),t.hitSquash=Math.max(t.hitSquash,.18),this.updateScoreboardHealth(e),this.updateScoreboardHealth(t),this.pulseScoreboard(t.id,"scoreboard-entry--pulse-hit"),this.pulseScoreboard(e.id,"scoreboard-entry--pulse-damage"),e.hitsTaken>=e.health&&this.eliminate(e,`${t.name} delivered the final blow`)}eliminate(t,e){t.alive=!1,t.eliminationReason=e,t.eliminatedAt=performance.now()-this.roundStartAt;const a=this.fighters.filter(n=>n.alive).length+1;this.results.push({name:t.name,placement:a,eliminationTimeMs:t.eliminatedAt,hitsTaken:t.hitsTaken,hitsInflicted:t.hitsInflicted,eliminationReason:e}),this.updateScoreboardHealth(t),this.pulseScoreboard(t.id,"scoreboard-entry--pulse-eliminated")}breakTie(){const t=this.fighters.filter(e=>e.alive);return t.length===0?null:(t.sort((e,a)=>{const n=a.health-e.health;if(n!==0)return n;const r=a.hitsInflicted-e.hitsInflicted;return r!==0?r:Math.random()-.5}),t[0])}finishBattle(t,e,a){this.phase!=="finished"&&(this.phase="finished",e?(e.eliminatedAt=a,this.results.push({name:e.name,placement:1,eliminationTimeMs:a,hitsTaken:e.hitsTaken,hitsInflicted:e.hitsInflicted,eliminationReason:"Victory!"}),this.winnerElement.innerHTML=`Winner: <span>${e.name}</span>`,this.setStatus(`${e.name} wins the battle!`),this.setWinnerHighlight(e.id),this.pulseScoreboard(e.id,"scoreboard-entry--pulse-hit")):(this.winnerElement.textContent="No winner determined",this.setStatus("No clear winner, try again!"),this.setWinnerHighlight(null)),this.renderResults(),this.overlayElement.textContent="")}renderResults(){const t=[...this.results].sort((a,n)=>a.placement-n.placement);if(t.length===0){this.resultsListElement.innerHTML="",this.resultsPlaceholderElement.hidden=!1,this.resultsElement.classList.add("results-panel--empty");return}this.resultsPlaceholderElement.hidden=!0,this.resultsElement.classList.remove("results-panel--empty");const e=t.map(a=>{const n=(a.eliminationTimeMs/1e3).toFixed(1),r=a.placement===1?"üèÜ":a.eliminationReason.includes("Lost")?"üíÄ":"‚öîÔ∏è",o=["result-item"];a.placement===1&&o.push("result-item--winner");const l=vt(a.name),h=`${vt(a.eliminationReason)} ¬∑ survived ${n}s ¬∑ dealt ${a.hitsInflicted} ¬∑ taken ${a.hitsTaken}`;return`<li class="${o.join(" ")}"><span class="result-icon">${r}</span><div class="result-content"><span class="result-name">${l}</span><span class="result-meta">${h}</span></div></li>`}).join("");this.resultsListElement.innerHTML=e}render(){const t=performance.now();this.context.save(),this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,L.width,L.height),this.context.restore(),this.context.save(),this.context.translate(this.centerX,this.centerY);const e=this.context.createRadialGradient(0,0,this.arena.radius*.18,0,0,this.arena.radius);e.addColorStop(0,"rgba(255, 210, 140, 0.3)"),e.addColorStop(.55,"rgba(140, 90, 220, 0.18)"),e.addColorStop(1,"rgba(10, 4, 24, 0)"),this.context.fillStyle=e,this.context.beginPath(),this.context.arc(0,0,this.arena.radius,0,Math.PI*2),this.context.fill(),this.context.strokeStyle="rgba(255, 215, 140, 0.55)",this.context.lineWidth=3,this.context.beginPath(),this.context.arc(0,0,this.arena.radius,0,Math.PI*2),this.context.stroke(),this.context.restore(),this.drawDangerBolts(t);const a=this.fighters.filter(r=>r.alive),n=this.fighters.filter(r=>!r.alive);for(const r of a)this.drawTrailSegments(r,t);for(const r of n)this.drawFighter(r,t);for(const r of a)this.drawFighter(r,t);this.drawLabels(a,t),this.drawHitEffects(t)}drawDangerBolts(t){const e=this.context,a=this.arena.radius;if(!(a<=0)){e.save(),e.translate(this.centerX,this.centerY),e.globalCompositeOperation="lighter";for(let n=0;n<this.lightningSeeds.length;n+=1){const r=this.lightningSeeds[n],o=r+t*8e-4+n*.35,l=.6+.4*Math.sin(t*.0045+r*9.7),i=4,h=.3+l*.2;e.beginPath();for(let d=0;d<=i;d+=1){const c=d/i,m=a+18+c*36,p=(Math.sin(r*11+c*8+t*.006)-.5)*h,f=o+p,g=Math.cos(f)*m,b=Math.sin(f)*m;d===0?e.moveTo(g,b):e.lineTo(g,b)}e.lineWidth=2.2+l*2.2,e.strokeStyle=`rgba(255, ${200+Math.round(l*40)}, ${90+Math.round(l*70)}, ${.35+l*.45})`,e.shadowBlur=18+l*18,e.shadowColor="rgba(255, 246, 210, 0.65)",e.stroke()}e.restore()}}drawHitEffects(t){const e=this.context,a=[];for(const n of this.hitEffects){const r=t-n.bornAt;if(r<0)continue;const o=r/n.duration;if(o>=1)continue;a.push(n);const l=1-o,i=26+n.intensity*18,h=i+o*50;e.save(),e.translate(n.x,n.y),e.globalCompositeOperation="lighter";const d=e.createRadialGradient(0,0,0,0,0,h);d.addColorStop(0,`rgba(255, 254, 202, ${.9*l})`),d.addColorStop(.45,`rgba(255, 184, 120, ${.55*l})`),d.addColorStop(1,"rgba(255, 90, 60, 0)"),e.fillStyle=d,e.beginPath(),e.arc(0,0,h,0,Math.PI*2),e.fill(),e.strokeStyle=`rgba(255, 212, 150, ${.75*l})`,e.lineWidth=3.2,e.beginPath(),e.arc(0,0,i+o*35,0,Math.PI*2),e.stroke();const c=6;e.lineWidth=2.4,e.strokeStyle=`rgba(255, 255, 255, ${.6*l})`;for(let p=0;p<c;p+=1){const f=n.seed+p*(Math.PI*2/c)+o*1.6,g=i+o*10,b=g+18+o*18;e.beginPath(),e.moveTo(Math.cos(f)*g,Math.sin(f)*g),e.lineTo(Math.cos(f)*b,Math.sin(f)*b),e.stroke()}e.strokeStyle=`rgba(255,255,255,${.35*l})`,e.lineWidth=2,e.beginPath();const m=n.seed*.4;e.arc(0,0,i+o*28,-.6+m,.6+m),e.stroke(),e.restore()}this.hitEffects=a}drawTrailSegments(t,e){const a=this.context,n=t.radius*2,r=[];for(const o of t.trailSegments){const l=e-o.created;if(l<0)continue;const i=l/mt;if(i>=1)continue;r.push(o);const h=o.alpha*(1-i);a.save(),a.globalAlpha=h,a.translate(o.x,o.y),a.rotate(o.angle),a.scale(1+i*.2,1-i*.25),a.drawImage(t.sprite,-n/2,-n/2,n,n),a.restore()}t.trailSegments=r}drawShadow(t){const e=this.context,a=Math.min(1,Math.hypot(t.vx,t.vy)/T),n=t.radius*(1.2+a*.25),r=t.radius*.55,o=t.alive?.36:.22;e.save(),e.translate(t.x,t.y+t.radius*.9),e.scale(1,.65-a*.1),e.fillStyle=`rgba(6, 0, 18, ${o.toFixed(2)})`,e.beginPath(),e.ellipse(0,0,n,r,0,0,Math.PI*2),e.fill(),e.restore()}drawFighter(t,e){this.drawShadow(t);const a=this.context,n=Math.hypot(t.vx,t.vy),r=Math.min(1,n/T),o=1+Math.sin(t.pulsePhase*2.8)*.02,l=o*(1+r*.12+t.hitSquash*.35),i=o*(1-r*.1-t.hitSquash*.28),h=Math.sin(t.pulsePhase*3+t.id)*.03;a.save(),a.translate(t.x,t.y),a.rotate(t.orientation+h),a.save(),a.scale(l,i);const d=t.radius*2;if(a.globalAlpha=t.alive?1:.32,a.drawImage(t.sprite,-d/2,-d/2,d,d),t.alive&&e<t.hitOverlayUntil){const f=t.hitOverlayUntil-e,g=Math.min(.45,.15+f/150*.45);a.fillStyle=`rgba(255,255,255,${g.toFixed(3)})`,a.beginPath(),a.arc(0,0,t.radius*.95,0,Math.PI*2),a.fill()}const c=3/Math.max(l,i,.001);a.lineWidth=c,a.strokeStyle=u(t.theme.edge).setAlpha(t.alive?.9:.4).toRgbString(),a.beginPath(),a.arc(0,0,t.radius*.98,0,Math.PI*2),a.stroke(),a.lineWidth=1.6/Math.max(l,i,.001),a.strokeStyle="rgba(255,255,255,0.22)",a.beginPath(),a.arc(0,0,t.radius*.78,0,Math.PI*2),a.stroke(),a.restore();const m=.7+r*.18;a.save(),a.scale(1,m),a.rotate(t.runeRotation);const p=t.radius*.95;a.strokeStyle=`rgba(255, 228, 170, ${t.alive?.68:.3})`,a.lineWidth=2,a.beginPath(),a.arc(0,0,p,0,Math.PI*2),a.stroke(),a.globalAlpha=t.alive?.18:.08,a.fillStyle=t.theme.rune,a.font=`${t.radius*1.3}px "Cinzel Decorative", serif`,a.textAlign="center",a.textBaseline="middle",a.fillText(t.runeChar,0,0),a.restore(),a.save(),a.fillStyle="rgba(14, 4, 24, 0.65)",a.beginPath(),a.arc(0,0,t.radius*.55,0,Math.PI*2),a.fill(),a.strokeStyle="rgba(255, 230, 190, 0.82)",a.lineWidth=1.4,a.stroke(),a.fillStyle="rgba(255, 248, 230, 0.92)",a.font=`${t.radius*.85}px "Cinzel Decorative", serif`,a.textAlign="center",a.textBaseline="middle",a.fillText(String(t.displayIndex),0,0),a.restore(),t.alive&&(this.drawAxe(a,t),this.drawHat(a,t,r,e)),a.restore(),t.alive&&this.drawCrystalHearts(t,e)}drawLabels(t,e){if(t.length===0)return;const a=this.context,n=16,r=6,o=6,l=t.map(i=>{const h=Math.max(14,Math.min(18,i.radius*.9));a.font=`${h}px "Cinzel Decorative", serif`;const d=i.name,c=a.measureText(d).width,m=h*.7,p=c+m+n*2+10,f=h+r*2,g=i.y-i.radius*1.9-f;return{fighter:i,text:d,fontSize:h,width:p,height:f,crestWidth:m,top:g,alpha:1}});l.sort((i,h)=>i.top-h.top);for(let i=1;i<l.length;i+=1){const h=l[i-1],d=l[i],c=h.top+h.height+o;d.top<c&&(d.top=c)}for(const i of l){const h=i.fighter.y-i.fighter.radius*.75-i.height;i.top>h?(i.top=h,i.alpha=.45):i.alpha=1}for(const i of l){const h=i.fighter,d=h.x,c=i.top+i.height,m=h.y-h.radius*.55;a.save(),a.strokeStyle=u(h.theme.base).setAlpha(.45).toRgbString(),a.lineWidth=1.4,a.beginPath(),a.moveTo(d,m);const p=(m+c)/2;a.quadraticCurveTo(d,p,d,c),a.stroke(),a.restore(),a.save(),a.translate(d,i.top+i.height/2),a.globalAlpha=i.alpha;const f=a.createLinearGradient(0,-i.height/2,0,i.height/2);f.addColorStop(0,"rgba(252, 233, 176, 0.78)"),f.addColorStop(1,"rgba(245, 216, 142, 0.88)"),a.fillStyle=f;const g=i.width,b=i.height,v=Math.min(14,b/2);a.beginPath(),a.moveTo(-g/2+v,-b/2),a.lineTo(g/2-v,-b/2),a.quadraticCurveTo(g/2,-b/2,g/2,-b/2+v),a.lineTo(g/2,b/2-v),a.quadraticCurveTo(g/2,b/2,g/2-v,b/2),a.lineTo(-g/2+v,b/2),a.quadraticCurveTo(-g/2,b/2,-g/2,b/2-v),a.lineTo(-g/2,-b/2+v),a.quadraticCurveTo(-g/2,-b/2,-g/2+v,-b/2),a.closePath(),a.shadowColor="rgba(255, 220, 140, 0.45)",a.shadowBlur=14,a.fill(),a.shadowBlur=0,a.strokeStyle="rgba(120, 70, 10, 0.55)",a.lineWidth=2,a.stroke();const S=i.fontSize*.35,x=-g/2+S+8;a.fillStyle=u(i.fighter.theme.crest).lighten(10).toHexString(),a.beginPath(),a.arc(x,0,S,0,Math.PI*2),a.fill(),a.strokeStyle="rgba(80, 40, 12, 0.45)",a.lineWidth=.8,a.stroke(),a.font=`${i.fontSize}px "Cinzel Decorative", serif`,a.textAlign="left",a.textBaseline="middle";const M=u(i.fighter.theme.base).lighten(32).toHexString(),A=x+S+8;a.strokeStyle="rgba(0, 0, 0, 0.55)",a.lineJoin="round",a.lineWidth=2.4,a.strokeText(i.text,A,0),a.fillStyle=M,a.fillText(i.text,A,0),a.restore()}}triggerHitEffect(t,e,a=1){this.hitEffects.push({x:t,y:e,bornAt:performance.now(),duration:260,intensity:a,seed:Math.random()*Math.PI*2})}drawCrystalHearts(t,e){const a=t.health,n=t.hitsTaken,r=Math.max(18,t.radius*.95),o=t.y-t.radius*(1.7+Math.sin(e*.003+t.id)*.03),l=t.x-(a-1)*r/2;for(let i=0;i<a;i+=1){const h=i>=n;this.drawCrystalHeart(l+i*r,o,t.radius*.42,h),i<n&&this.drawBrokenHeartOverlay(l+i*r,o,t.radius*.42)}}drawCrystalHeart(t,e,a,n){const r=this.context;r.save(),r.translate(t,e),r.scale(a,a);const o=r.createLinearGradient(0,-1,0,1);o.addColorStop(0,"rgba(255, 255, 255, 0.9)"),o.addColorStop(.4,"rgba(255, 174, 230, 0.95)"),o.addColorStop(1,"rgba(255, 90, 160, 0.92)"),r.fillStyle=n?o:"rgba(90, 30, 70, 0.3)",r.beginPath(),r.moveTo(0,.95),r.lineTo(-.85,-.05),r.bezierCurveTo(-1.1,-.7,-.35,-1.15,0,-.45),r.bezierCurveTo(.35,-1.15,1.1,-.7,.85,-.05),r.closePath(),r.fill(),r.lineWidth=.12,r.strokeStyle="rgba(255, 255, 255, 0.4)",r.stroke(),r.restore()}drawBrokenHeartOverlay(t,e,a){const n=this.context;n.save(),n.translate(t,e),n.scale(a,a),n.strokeStyle="rgba(255, 255, 255, 0.8)",n.lineWidth=.18,n.beginPath(),n.moveTo(-.4,-.2),n.lineTo(0,.2),n.lineTo(.4,-.2),n.stroke(),n.restore()}drawAxe(t,e){const a=Math.sin(e.weaponSwingPhase)*.45,n=e.radius*1.7,r=Math.max(4,e.radius*.24),o=n*.7,l=n*.75,i=e.radius*.65;t.save(),t.rotate(a+Math.PI/2),t.translate(0,i);const h=t.createLinearGradient(0,-n*.5,0,n*.6);h.addColorStop(0,"rgba(210, 170, 90, 0.9)"),h.addColorStop(1,"rgba(120, 80, 30, 0.95)"),t.fillStyle=h,t.strokeStyle="rgba(40, 12, 4, 0.5)";const d=t;typeof d.roundRect=="function"?d.roundRect(-r/2,-n*.3,r,n,r/2):(t.beginPath(),t.rect(-r/2,-n*.3,r,n),t.closePath()),t.fill(),t.stroke();const c=t.createLinearGradient(r/2,-l/2,r/2+o,l/2);c.addColorStop(0,"#f3f4f8"),c.addColorStop(.45,"#c7cfda"),c.addColorStop(1,"#6d7a8e"),t.fillStyle=c,t.beginPath(),t.moveTo(r/2,-l/2),t.lineTo(r/2+o*.95,-l*.4),t.quadraticCurveTo(r/2+o*1.05,0,r/2+o*.95,l*.4),t.lineTo(r/2,l/2),t.closePath(),t.fill(),t.strokeStyle="rgba(40, 45, 70, 0.55)",t.lineWidth=Math.max(1.4,e.radius*.08),t.stroke(),t.fillStyle="rgba(238, 184, 78, 0.95)",t.beginPath(),t.arc(0,-n*.32,r*.55,0,Math.PI*2),t.fill(),t.strokeStyle="rgba(120, 70, 20, 0.7)",t.lineWidth=.8,t.stroke(),t.restore()}drawHat(t,e,a,n){const r=Math.sin(n*.004+e.id)*.18+e.hitSquash*.4,o=Math.sin(e.weaponSwingPhase*.8)*.05;t.save(),t.translate(0,-e.radius*.95),t.rotate(r+o);const l=e.radius*.75,i=t.createLinearGradient(-l,-l,l,l);i.addColorStop(0,"#d7d9e3"),i.addColorStop(.5,"#9aa1b3"),i.addColorStop(1,"#555b6d"),t.fillStyle=i,t.beginPath(),t.ellipse(0,0,l,l*.6,0,Math.PI,0,!0),t.fill(),t.strokeStyle="rgba(20, 24, 40, 0.6)",t.lineWidth=2,t.stroke();const h=t.createLinearGradient(-l,0,l,0);h.addColorStop(0,"rgba(255, 215, 120, 0.95)"),h.addColorStop(1,"rgba(200, 150, 60, 0.95)"),t.fillStyle=h,t.beginPath(),t.ellipse(0,l*.05,l*.92,l*.25,0,0,Math.PI*2),t.fill(),t.strokeStyle="rgba(90, 40, 10, 0.6)",t.lineWidth=1.2,t.stroke();const d=l*.6,c=l*.9,m=.5+a*.2,p=f=>{t.save(),t.translate(f*d,-l*.1),t.rotate(f*m);const g=t.createLinearGradient(0,0,0,-c);g.addColorStop(0,"#7a5030"),g.addColorStop(.3,"#d4b38a"),g.addColorStop(1,"#f7e8d3"),t.fillStyle=g,t.beginPath(),t.moveTo(0,0),t.quadraticCurveTo(f*c*.3,-c*.35,f*c*.1,-c),t.quadraticCurveTo(f*c*-.2,-c*.45,0,0),t.fill(),t.strokeStyle="rgba(50, 30, 20, 0.35)",t.lineWidth=1.2,t.stroke(),t.restore()};p(-1),p(1),t.restore()}resizeCanvas(){const t=L.getBoundingClientRect(),e=this.canvasWidth>0&&this.canvasHeight>0,a=e?Math.min(this.canvasWidth,this.canvasHeight):Math.min(t.width,t.height),n=this.centerX,r=this.centerY,o=window.devicePixelRatio||1;L.width=t.width*o,L.height=t.height*o,typeof D.resetTransform=="function"?D.resetTransform():D.setTransform(1,0,0,1,0,0),D.scale(o,o),this.canvasWidth=t.width,this.canvasHeight=t.height,this.centerX=t.width/2,this.centerY=t.height/2;const l=Math.min(t.width,t.height);if(e){const i=l/a;this.arena.radius*=i;for(const h of this.fighters){const d=h.x-n,c=h.y-r;h.x=this.centerX+d*i,h.y=this.centerY+c*i,h.vx*=i,h.vy*=i,h.radius=Math.max(16,Math.min(36,h.radius*i))}}else{const i=l/2.6;this.arena.radius=i}this.arena.minRadius=l/8,this.arena.radius=Math.max(this.arena.radius,this.arena.minRadius)}lerpAngle(t,e,a){const n=Math.atan2(Math.sin(e-t),Math.cos(e-t));return t+n*a}setStatus(t){this.statusElement.textContent=t}cancelLoop(){this.requestId!==null&&(cancelAnimationFrame(this.requestId),this.requestId=null)}}const de=new ce(D,xt,ae,ne,se,re,ie,{alive:oe,fallen:le,fallenSection:he});U.addEventListener("click",()=>{const s=ee.value.split(/\r?\n/).map(a=>a.trim()).filter(a=>a.length>0),t=Array.from(new Set(s));if(t.length<2){xt.textContent="Add at least two contenders to start the battle.";return}U.disabled=!0,setTimeout(()=>{U.disabled=!1},500);const e=O.value;de.start(t,e)});
